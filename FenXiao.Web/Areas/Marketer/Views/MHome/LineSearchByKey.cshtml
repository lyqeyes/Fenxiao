@model PagedList<FenXiao.Model.Product>
@using Webdiyer.WebControls.Mvc
@section title{
    <title>零售商-线路搜索</title>
    <link rel="stylesheet" href="//code.jquery.com/ui/1.11.0/themes/smoothness/jquery-ui.css">
<link href="~/assets/bootstrap.min.css" rel="stylesheet" />
}
<div class="h60"></div>
<div class="part">
    <p class="position">◆当前位置：搜索线路 >> 搜索结果</p>
    <div class="search_part">
        <div class="search_input">
            <form method="post" action="\Marketer\MHome\LineSearchByKey">
                <p class="search_input_part">
                    <input type="text" class="search_input_text" id="key" name="key" placeholder="请输入搜索路线的关键词">
                    <button type="submit" class="search_input_btn" id="submit">搜索路线</button>
                </p>
            </form>
        </div>
    </div>
    <!--搜索结果区域-->
    <div class="search_input_result_tab">
        <p>搜索结果</p>
    </div>
    @foreach (var item in Model)
    {
        <div class="line_details_title">
            <div class="title_left">
                <h1><a href="~/Marketer/MHome/LineDetail?Id=@item.Id"><small>No.@item.Id　</small>@item.Name</a></h1>
                <p>批发商：<span class="f-lightblue">@item.User.Company.CompanyName</span>　　　　　　　快捷操作：<a href="~/Marketer/MHome/LineDetail?Id=@item.Id" class="f-lightblue">1.查看详情</a>　　　<a class="f-lightblue">2.下载行程</a></p>
                <p>发团时间：<span class="f-lightblue">@item.SendGroupTime</span>　　　总数：<span class="f-lightblue">@(item.Count)份</span>　　剩余量：<span class="f-lightblue">@(item.RemainCount)份</span></p>
                <p>建议零售价：<span>@item.SuggestionPrice</span></p>
            </div>
            <div class="title_right">
                <div class="title_right_others">
                    <p class="price">成人价：<span class="number">￥@(item.ChengRenPrice)</span>元</p>
                    <p class="price">儿童价：<span class="number">￥@(item.ErTongPrice)</span>元</p>
                    <a href="~/Marketer/MHome/CreateOrder?ProductId=@item.Id"><span class="btn_sub">立即抢购！</span></a>
                </div>
                <b class="waveline"></b>
            </div>
        </div>
    }
    <div style="text-align:center; margin-left:-2em;">
        @Html.Pager(Model, new PagerOptions
                 {
                     HorizontalAlign = "center",
                     ShowFirstLast = false,
                     CssClass = "pagination pagination-sm",
                     NavigationPagerItemWrapperFormatString = "<li>{0}</li>",
                     ContainerTagName = "ul",
                     PageIndexParameterName = "id",
                     ShowPageIndexBox = false,
                     PrevPageText = "<<",
                     NumericPagerItemCount = 3,
                     Id = "pages",
                     NextPageText = ">>",
                     CurrentPagerItemWrapperFormatString = "<li class=\"active\"> <a>{0}</a> </li>",
                     NumericPagerItemWrapperFormatString = "<li> {0}</li>",
                 }, new { style = "margin-top:2em;margin-bottom:2em" })
    </div>
    @if (Model.Count == 0)
    {
        <p style="text-align:center;line-height:100px;">暂无相关线路</p>
    }
</div>

@section scripts{
    <script src="//code.jquery.com/jquery-1.10.2.js"></script>
    <script src="//code.jquery.com/ui/1.11.0/jquery-ui.js"></script>
    <script type="text/javascript">
        $("#Menu").children("li").eq(0).removeClass("active");
        $("#Menu").children("li").eq(1).removeClass("active");
        $("#Menu").children("li").eq(2).removeClass("active");
        $("#Menu").children("li").eq(3).removeClass("active");
        $("#Menu").children("li").eq(0).addClass("active");
    </script>
    <script>
    $(function () {
        $("#datepicker1").datepicker({
            changeMonth:true,  //月份下拉列表
            changeYear: true,  //月份下拉列表
            showOn: "both",    //点击图片和输入框都弹出面板
            showButtonPanel: true, //显示面板底部按钮
            closeTextType:"关闭", //关闭按钮文字
            currentText: "今天",   //返回今天按钮文字
            dateFormat:"yy-mm-dd",
            dayNamesMin: ['日', '一', '二', '三', '四', '五', '六'],
            monthNames: ['一月', '二月', '三月', '四月', '五月', '六月',
            '七月', '八月', '九月', '十月', '十一月', '十二月'],
            monthNamesShort: ['一月', '二月', '三月', '四月', '五月', '六月',
            '七月', '八月', '九月', '十月', '十一月', '十二月']
        });
        $("#datepicker2").datepicker({
            changeMonth: true,  //月份下拉列表
            changeYear: true,  //月份下拉列表
            showOn: "both",    //点击图片和输入框都弹出面板
            showButtonPanel: true, //显示面板底部按钮
            closeTextType: "关闭", //关闭按钮文字
            currentText: "今天",   //返回今天按钮文字
            dateFormat: "yy-mm-dd",
            dayNamesMin: ['日', '一', '二', '三', '四', '五', '六'],
            monthNames: ['一月', '二月', '三月', '四月', '五月', '六月',
            '七月', '八月', '九月', '十月', '十一月', '十二月'],
            monthNamesShort: ['一月', '二月', '三月', '四月', '五月', '六月',
            '七月', '八月', '九月', '十月', '十一月', '十二月'],
            onSelect: function (event, ui) {
                var app = "";
                $("a.choosed").each(function () {
                    app += $(this).data("val") + "a";
                });
                app = app.substring(0, app.length - 1)
                location.href = "/Marketer/MHome/LineSearch?type=" + app +
                    "&from=" + $("#datepicker1").val()
                    + "&to="+$("#datepicker2").val();
            }
        });
        $("#AddSearchAdition").click();
    });
    function xm_search(obj)
    {
        var app = "";
        var curval = $(obj).data("val");
        var curper = $(obj).data("per");
        $("a.choosed").each(function () {
            if ($(this).data("per") == curper) {
                app += curval + "a";
            } else {
                app += $(this).data("val") + "a";
            }
        });
        app = app.substring(0, app.length - 1)
        if ($("#datepicker1").val()=="") {
            location.href = "/Marketer/MHome/LineSearch?type=" + app;
        } else {
            location.href = "/Marketer/MHome/LineSearch?type=" + app +
                    "&from=" + $("#datepicker1").val()
                    + "&to=" + $("#datepicker2").val();
        }

    }
    </script>
}